<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Golang on I Will Survive</title>
    <link>http://blog.restartr.com/tags/golang/</link>
    <description>Recent content in Golang on I Will Survive</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Mon, 29 Aug 2016 07:00:00 +0900</lastBuildDate>
    <atom:link href="http://blog.restartr.com/tags/golang/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Goã®é€šä¿¡çµŒè·¯é¸æŠ(net.LookupIP &amp; net.Dial)</title>
      <link>http://blog.restartr.com/2016/08/29/golang-networking</link>
      <pubDate>Mon, 29 Aug 2016 07:00:00 +0900</pubDate>
      
      <guid>http://blog.restartr.com/2016/08/29/golang-networking</guid>
      <description>

&lt;p&gt;Goã®HTTPé€šä¿¡çµŒè·¯é¸æŠã®æŒ™å‹•ã«ã¤ã„ã¦è…‘ã«è½ã¡ãªã„ç‚¹ãŒã‚ã‚Šã€&lt;code&gt;net.LookupIP&lt;/code&gt;/&lt;code&gt;net.Dial&lt;/code&gt;ã®ä»•æ§˜ã¨ãã‚Œã«ä¼´ã„ç”Ÿã˜ã‚‹æ¥ç¶šçµŒè·¯ã®é¸æŠå•é¡Œã€ãã—ã¦ãã®å¯¾ç­–ã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h3 id=&#34;tl-dr:165353d24c0bb1dfa78b677fc4ac1461&#34;&gt;TL;DR&lt;/h3&gt;

&lt;p&gt;unixç’°å¢ƒã«ãŠã‘ã‚‹Goã®åå‰è§£æ±ºã¾ã‚ã‚Šã®ä»•æ§˜&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;net.LookupIP&lt;/code&gt;ã¯DNSã‹ã‚‰å–å¾—ã§ããŸã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã‚’ãã®ã¾ã¾è¿”ã™ã‚ã‘ã§ã¯ãªã„&lt;/li&gt;
&lt;li&gt;å†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é–“ã®æ¥ç¶šã§ã‚ã‚Œã°&lt;strong&gt;æ¥ç¶šå…ƒã¨æ¥ç¶šå…ˆãŒãƒ“ãƒƒãƒˆåˆ—çš„ã«è¿‘ã„ã‚‚ã®ã‚’å„ªå…ˆã—ãŸã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆ&lt;/strong&gt;ã‚’è¿”ã™&lt;/li&gt;
&lt;li&gt;&lt;code&gt;net.Dial&lt;/code&gt;ã¯&lt;code&gt;net.LookupIP&lt;/code&gt;ãŒã‹ãˆã™ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã®å…ˆé ­ã‹ã‚‰æ¥ç¶šã‚’è©¦ã¿ã‚‹&lt;/li&gt;
&lt;li&gt;ãã®å¾Œã€æœ€åˆã«æ¥ç¶šãŒæˆåŠŸã—ãŸã‚‚ã®ã¨ã®ã¿é€šä¿¡ã‚’è¡Œã†&lt;/li&gt;
&lt;li&gt;DNSãƒ©ã‚¦ãƒ³ãƒ‰ãƒ­ãƒ“ãƒ³ç­‰ã§è¤‡æ•°ã‚¢ãƒ‰ãƒ¬ã‚¹ã«åˆ†æ•£ã—ãŸã„å ´åˆã€ã“ã®ä»•æ§˜ã«ã‚ˆã‚ŠçµŒè·¯ãŒå›ºå®šã•ã‚Œã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚‹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å‰ææ¡ä»¶ãªã©ã«ã‚ˆã£ã¦æŒ™å‹•ãŒã‹ã‚ã‚Šã¾ã™ã®ã§ã€ã“ã“ã‹ã‚‰æ·±æ˜ã‚Šã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;å‰æã¨ã™ã‚‹ç’°å¢ƒ:165353d24c0bb1dfa78b677fc4ac1461&#34;&gt;å‰æã¨ã™ã‚‹ç’°å¢ƒ&lt;/h3&gt;

&lt;p&gt;ä»Šå›ã¯ä»¥ä¸‹ã®ç’°å¢ƒã‚’æƒ³å®šã¨ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;unixç³»OSã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹&lt;/li&gt;
&lt;li&gt;Go1.5ä»¥é™ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹&lt;/li&gt;
&lt;li&gt;IPv4ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹&lt;/li&gt;
&lt;li&gt;AWSã®VPCãªã©å†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’æ§‹ç¯‰ã—ã¦ã„ã‚‹&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;goã®-net-lookupip-ã¨-net-dial-ã®ä»•æ§˜:165353d24c0bb1dfa78b677fc4ac1461&#34;&gt;Goã®&lt;code&gt;net.LookupIP&lt;/code&gt;ã¨&lt;code&gt;net.Dial&lt;/code&gt;ã®ä»•æ§˜&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://golang.org/pkg/net/#LookupIP&#34;&gt;net.LookupIP - The Go Programming Language&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;net.LookupIP&lt;/code&gt;ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªä»•æ§˜ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;åå‰è§£æ±ºã¯&lt;code&gt;getaddrinfo&lt;/code&gt;ç›¸å½“ã‚’Goã§å®Ÿè£…&lt;/li&gt;
&lt;li&gt;è§£æ±ºã—ãŸçµæœã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã‚’&lt;a href=&#34;https://tools.ietf.org/html/rfc6724&#34;&gt;RFC6724&lt;/a&gt;ã«ã‚‚ã¨ã¥ã„ã¦ã‚½ãƒ¼ãƒˆã‚’å®Ÿæ–½&lt;/li&gt;
&lt;li&gt;ã‚½ãƒ¼ãƒˆæ¸ˆã¿ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã‚’å‘¼ã³å‡ºã—å…ƒã«è¿”ã™&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã“ã®RFC6724ã«åŸºã¥ã„ãŸã‚½ãƒ¼ãƒˆå‡¦ç†ã«ã‚ˆã£ã¦&lt;strong&gt;DNSãŒè¿”ã™ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã®é †åºãŒå¤‰æ›´ã•ã‚Œã¦ã—ã¾ã†å¯èƒ½æ€§&lt;/strong&gt;ãŒã‚ã‚Šã€
ãã®å¯èƒ½æ€§ã¯æ¥ç¶šå…ƒã¨æ¥ç¶šå…ˆã®çµ„ã¿åˆã‚ã›ã«ä¾å­˜ã—ã¦ã„ã¾ã™ã€‚
(â€»ã‚½ãƒ¼ãƒˆå‡¦ç†å®Ÿè£…ã§ã‚ã‚‹&lt;code&gt;sortByRFC6724&lt;/code&gt;ã®å®šç¾©ã¯&lt;a href=&#34;https://github.com/golang/go/blob/release-branch.go1.7/src/net/addrselect.go&#34;&gt;go/addrselect.go&lt;/a&gt;ã‚’å‚ç…§)&lt;/p&gt;

&lt;p&gt;ã¡ãªã¿ã«ã€ã“ã®RFC6724ã«ã‚ˆã‚‹ã‚½ãƒ¼ãƒˆã¯go-1.5ä»¥é™ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å«ã¾ã‚Œã‚‹(&lt;a href=&#34;https://github.com/golang/go/commit/adb1e030136f14ef8434930f15a04a74568a5948&#34;&gt;net: RFC 6724 address selection Â· golang/go&lt;/a&gt;)ã®ã§ã€ãã‚Œä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯æŒ™å‹•ãŒç•°ãªã£ã¦ãã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;net.Dial&lt;/code&gt;ã¯&lt;code&gt;net.LookupIP&lt;/code&gt;ãŒã‹ãˆã™ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã®å…ˆé ­ã‹ã‚‰æ¥ç¶šã‚’è©¦ã¿ã¦ã„ãã€æœ€åˆã«æ¥ç¶šæˆåŠŸã—ãŸã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æœ€çµ‚çš„ãªæ¥ç¶šå…ˆã¨ã—ã¾ã™ã€‚ãã®ãŸã‚ã€æœ€çµ‚çš„ãªDialå…ˆIPã¯&lt;code&gt;net.LookupIP&lt;/code&gt;ã®çµæœã«å¼·ãä¾å­˜ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;sortbyrfc6724-å†…éƒ¨ã®ã‚½ãƒ¼ãƒˆä»•æ§˜:165353d24c0bb1dfa78b677fc4ac1461&#34;&gt;&lt;code&gt;sortByRFC6724&lt;/code&gt;å†…éƒ¨ã®ã‚½ãƒ¼ãƒˆä»•æ§˜&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/golang/go/blob/release-branch.go1.7/src/net/addrselect.go&#34;&gt;src/net/addrselect.go&lt;/a&gt;ã‚’ã¿ã‚‹ã¨ã€10ãƒ«ãƒ¼ãƒ«ãŒã‚½ãƒ¼ãƒˆã«ã¤ã‹ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// Less reports whether i is a better destination address for this
// host than j.
//
// The algorithm and variable names comes from RFC 6724 section 6.
func (s *byRFC6724) Less(i, j int) bool {
        // Rule 1: Avoid unusable destinations.
        // Rule 2: Prefer matching scope.
        // Rule 3: Avoid deprecated addresses.
        // Rule 4: Prefer home addresses.
        // Rule 5: Prefer matching label.
        // Rule 6: Prefer higher precedence.
        // Rule 7: Prefer native transport.
        // Rule 8: Prefer smaller scope.
        // Rule 9: Use longest matching prefix.
        // Rule 10: Otherwise, leave the order unchanged.
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã†ã¡ã€&lt;code&gt;Rule 9: Use longest matching prefix.&lt;/code&gt;ãŒæ³¨ç›®ã™ã¹ãå‡¦ç†ã¨ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Rule 9&lt;/code&gt;ã§ã¯&lt;strong&gt;æ¥ç¶šå…ƒã¨æ¥ç¶šå…ˆãŒç‰¹å®šã®ãƒ–ãƒ­ãƒƒã‚¯ã«å­˜åœ¨ã—ã¦ã„ã‚‹å ´åˆã«é™ã‚Šã€ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒ“ãƒƒãƒˆåˆ—ã®ä¸€è‡´ã™ã‚‹é•·ã•ã‚’ã‚¹ã‚³ã‚¢ã¨ã—ã¾ã™ã€‚&lt;/strong&gt;
ãã—ã¦&lt;code&gt;sortByRFC6724&lt;/code&gt;ã¯ã“ã®ã‚¹ã‚³ã‚¢ã®é«˜ã„ã‚‚ã®ã‚’å„ªå…ˆã—ã¦ãƒªã‚¹ãƒˆã‚’ã‚½ãƒ¼ãƒˆã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ã‚½ãƒ¼ãƒˆã®ã‚¹ã‚³ã‚¢ç®—å‡ºå‡¦ç†ã®æ¤œè¨¼:165353d24c0bb1dfa78b677fc4ac1461&#34;&gt;ã‚½ãƒ¼ãƒˆã®ã‚¹ã‚³ã‚¢ç®—å‡ºå‡¦ç†ã®æ¤œè¨¼&lt;/h3&gt;

&lt;p&gt;ã“ã®ã‚¹ã‚³ã‚¢ç®—å‡ºå‡¦ç†ã¯netãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«é–‰ã˜ã‚‰ã‚Œã¦ã„ã¾ã™ãŒã€ãªã‚“ã¨ã‹å‹•ä½œã‚’æ¤œè¨¼ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;AWSã®VPCã«internalELBã‚’ç«‹ã¦ãŸå ´åˆã‚’ä¾‹ã‚’ä»¥ä¸‹ã«è¨˜ã—ã¾ã™ã€‚&lt;code&gt;10.0.0.0/16&lt;/code&gt;ã®VPCå†…ã«ä»¥ä¸‹4ã¤ã®ã‚µãƒ–ãƒãƒƒãƒˆãŒå­˜åœ¨ã™ã‚‹ç’°å¢ƒã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;10.0.0.0/24
10.0.1.0/24
10.0.2.0/24
10.0.3.0/24
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã“ã«internal ELBã‚’é…ç½®ã—ãŸçµæœã€&lt;code&gt;10.0.0.2&lt;/code&gt;ã®VPCç”¨DNSã«ELBã®åã‚’å•ã„åˆã‚ã›ã‚‹ã¨ä»¥ä¸‹4ã¤ã®IPãŒå–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;10.0.0.104
10.0.1.12
10.0.2.8
10.0.3.221
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ELBã®åå‰è§£æ±ºã‚’è¡Œã†éš›ã«sortByRFC6724ã§ã©ã®ã‚ˆã†ã«ã‚½ãƒ¼ãƒˆã•ã‚Œã‚‹ã‹ã‚’ã¿ã‚‹ãŸã‚ã«ã€
ä»¥ä¸‹ã«é‡è¦ãªé–¢æ•°ã®ã‚³ãƒ”ãƒ¼ã—ã¦å¹¾ã¤ã‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è©¦ã™ã‚µãƒ³ãƒ—ãƒ«ã‚’æ›¸ãã¾ã—ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://play.golang.org/p/9P17Lm3-KX&#34;&gt;https://play.golang.org/p/9P17Lm3-KX&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã“ã‚Œã¯æ¥ç¶šå…ƒã¨æ¥ç¶šå…ˆã®IPã®çµ„ã¿åˆã‚ã›ã«ãŠã„ã¦å„ã‚¹ã‚³ã‚¢ã‚’è¡¨ç¤ºã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã‚ã‚Šã€
æ¤œè¨¼ã™ã‚‹æ¥ç¶šå…ƒã¨æ¥ç¶šå…ˆIPã®çµ„ã¿åˆã‚ã›ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;    // destination IPs
    dsts := []net.IP{
        net.IP{10, 0, 0, 104}, // 10.0.0.0/24
        net.IP{10, 0, 1, 12},  // 10.0.1.0/24
        net.IP{10, 0, 2, 8},   // 10.0.2.0/24
        net.IP{10, 0, 3, 221}, // 10.0.3.0/24
    }

    // source IPs
    srcs := []net.IP{
        net.IP{123, 4, 5, 6},
        net.IP{10, 0, 1, 3},
        net.IP{10, 0, 1, 199},
        net.IP{10, 0, 4, 211},
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Ÿè¡Œã™ã‚‹ã¨çµæœã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# case1: å¤–éƒ¨ã‹ã‚‰å•ã„åˆã‚ã›ãŸå ´åˆ
src: 123.4.5.6
-&amp;gt; 10.0.0.104   : 1 (same block=false)
-&amp;gt; 10.0.1.12    : 1 (same block=false)
-&amp;gt; 10.0.2.8     : 1 (same block=false)
-&amp;gt; 10.0.3.221   : 1 (same block=false)

# case2: VPCå†…éƒ¨ã®`10.0.1.0/24`ã‹ã‚‰å•ã„åˆã‚ã›ãŸå ´åˆ
src: 10.0.1.3
-&amp;gt; 10.0.0.104   : 23 (same block=true)
-&amp;gt; 10.0.1.12    : 28 (same block=true)
-&amp;gt; 10.0.2.8     : 22 (same block=true)
-&amp;gt; 10.0.3.221   : 22 (same block=true)

# case3: VPCå†…éƒ¨ã®`10.0.1.0/24`ã‹ã‚‰å•ã„åˆã‚ã›ãŸå ´åˆ
src: 10.0.1.199
-&amp;gt; 10.0.0.104   : 23 (same block=true)
-&amp;gt; 10.0.1.12    : 24 (same block=true)
-&amp;gt; 10.0.2.8     : 22 (same block=true)
-&amp;gt; 10.0.3.221   : 22 (same block=true)

# case4: ELBãŒæ‰€å±ã—ãªã„åˆ¥ã‚µãƒ–ãƒãƒƒãƒˆã‹ã‚‰å•ã„åˆã‚ã›ãŸå ´åˆ
src: 10.0.4.211
-&amp;gt; 10.0.0.104   : 21 (same block=true)
-&amp;gt; 10.0.1.12    : 21 (same block=true)
-&amp;gt; 10.0.2.8     : 21 (same block=true)
-&amp;gt; 10.0.3.221   : 21 (same block=true)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¡¨ç¤ºå†…å®¹ã¯&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;-&amp;gt; 10.0.1.12    : 24 (same block=true)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã®å ´åˆã€&lt;code&gt;10.0.0.12&lt;/code&gt;ã«å¯¾ã™ã‚‹ã‚¹ã‚³ã‚¢ãŒ&lt;code&gt;24&lt;/code&gt;ã§ã‚ã‚Šã€å®Ÿéš›ã«ãã®ã‚¹ã‚³ã‚¢ã‚’æ¡ç”¨ã™ã‚‹ãªã‚‰&lt;code&gt;same block=true&lt;/code&gt;ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã§é‡è¦ãªã®ã¯ã€&lt;strong&gt;VPCå¤–éƒ¨ã®IPã‹ã‚‰å•ã„åˆã‚ã›ãŸå ´åˆã¯ã‚¹ã‚³ã‚¢ã¯ã™ã¹ã¦ãŠãªã˜&lt;/strong&gt;ã§ã‚ã‚‹ã“ã¨ã¨ã€&lt;strong&gt;åŒã˜ã‚µãƒ–ãƒãƒƒãƒˆã‹ã‚‰å•ã„åˆã‚ã›ã¦ã‚‚ã‚¹ã‚³ã‚¢ãŒç•°ãªã‚‹æ¥ç¶šå…ˆIPãŒã‚ã‚‹&lt;/strong&gt;ã“ã¨ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;åŒã˜&lt;code&gt;10.0.1.0/24&lt;/code&gt;ã‹ã‚‰å•ã„åˆã‚ã›ã¦ã‚‚ã€case3ã®&lt;code&gt;10.0.1.199&lt;/code&gt;ã‚ˆã‚Šcase2ã®&lt;code&gt;10.0.1.3&lt;/code&gt;ã®ã»ã†ãŒ&lt;code&gt;10.0.1.12&lt;/code&gt;ã«å¯¾ã™ã‚‹ã‚¹ã‚³ã‚¢ãŒé«˜ããªã£ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã¯ã€æ¥ç¶šå…ƒIPã¨æ¥ç¶šå…ˆIPã®32bitã®ãƒ“ãƒƒãƒˆåˆ—ã‹ã‚‰ä¸€è‡´ã™ã‚‹ãƒ“ãƒƒãƒˆé•·ã‚’ã‚‚ã¨ã«ã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚
æ¥ç¶šå…ƒIPãŒåŒã˜ã‚µãƒ–ãƒãƒƒãƒˆã«æ‰€å±ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã¯ã‚¹ã‚³ã‚¢ã«å½±éŸ¿ã—ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;h3 id=&#34;çµŒè·¯ãŒå›ºå®šåŒ–ã•ã‚Œãªã„ãŸã‚ã®å¯¾ç­–:165353d24c0bb1dfa78b677fc4ac1461&#34;&gt;çµŒè·¯ãŒå›ºå®šåŒ–ã•ã‚Œãªã„ãŸã‚ã®å¯¾ç­–&lt;/h3&gt;

&lt;p&gt;ã“ã“ã¾ã§ã§æ›¸ã„ãŸã‚ˆã†ã«&lt;code&gt;net.Lookup&lt;/code&gt;ãŒè¿”ã™ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã¯ç‰¹å®šã®ç’°å¢ƒä¸‹ã§å¿…ãšåŒã˜ä¸¦ã³ã«ãªã£ã¦ã—ã¾ã„ã€ãã®çµæœ&lt;code&gt;net.Dial&lt;/code&gt;ã§ã®æ¥ç¶šå…ˆãŒå›ºå®šåŒ–ã•ã‚Œã¦ã—ã¾ã†ã‚±ãƒ¼ã‚¹ãŒç™ºç”Ÿã—ã¾ã™ã€‚
ãã®å¯¾ç­–ã¨ã—ã¦æ˜ç¤ºçš„ã«ãƒ©ãƒ³ãƒ€ãƒ ãªIPã§æ¥ç¶šã™ã‚‹æ–¹æ³•ãŒä½¿ãˆã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;http.Clientã‚’ä½¿ã£ãŸHTTPæ¥ç¶šã®ä¾‹ã ã¨ã€æ‰‹é †ã¯ã“ã†ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;net.LookupIP&lt;/code&gt;ã§ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã‚’å–å¾—&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤IPã‚’é¸æŠ&lt;/li&gt;
&lt;li&gt;URLã«ã¯ãƒ›ã‚¹ãƒˆåã§ã¯ãªãIPã‚’æŒ‡å®šã™ã‚‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Request.Host&lt;/code&gt;ã«æœ¬æ¥ã®ãƒ›ã‚¹ãƒˆå(ã¨ãƒãƒ¼ãƒˆ)ã‚’æŒ‡å®šã™ã‚‹&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&#34;ç°¡å˜ãªå®Ÿè£…ä¾‹:165353d24c0bb1dfa78b677fc4ac1461&#34;&gt;ç°¡å˜ãªå®Ÿè£…ä¾‹&lt;/h4&gt;

&lt;p&gt;ä½•ã‹ã¨è²§å¼±ãªå®Ÿè£…ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ä¸€å¿œãƒ©ãƒ³ãƒ€ãƒ ã«IPãŒæ¡ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package main

import (
	&amp;quot;fmt&amp;quot;
	&amp;quot;math/rand&amp;quot;
	&amp;quot;net&amp;quot;
	&amp;quot;net/http&amp;quot;
	&amp;quot;net/http/httputil&amp;quot;
	&amp;quot;net/url&amp;quot;
	&amp;quot;strings&amp;quot;
	&amp;quot;time&amp;quot;
)

// random selection from ipaddrs
func pickupIP(host string) (string, error) {
	addrs, err := net.LookupIP(host)
	if err != nil {
		return &amp;quot;&amp;quot;, err
	}
	rand.Seed(time.Now().UnixNano())
	idx := rand.Intn(len(addrs))
	ipaddr := addrs[idx].String()
	return ipaddr, nil

}

func do(req *http.Request) (*http.Response, error) {
	hostport := strings.Split(req.URL.Host, &amp;quot;:&amp;quot;)
	ipaddr, err := pickupIP(hostport[0])
	if err != nil {
		return nil, err
	}

	urlstr := req.URL.Scheme + &amp;quot;://&amp;quot; + ipaddr
	if len(hostport) &amp;gt; 1 {
		urlstr = urlstr + &amp;quot;:&amp;quot; + hostport[1]
	}
	u, err := url.Parse(urlstr)
	if err != nil {
		return nil, err
	}

	// set ipaddr to req.Host and
	// keep the original `Host` header
	req.Host = req.URL.Host
	req.URL.Host = u.Host

	b, err := httputil.DumpRequest(req, true)
	if err != nil {
		return nil, err
	}
	fmt.Println(string(b))

	client := http.DefaultClient
	return client.Do(req)
}

func main() {
	urlstr := &amp;quot;http://internal-user-api-779196100.ap-northeast-1.elb.amazonaws.com:8888/ping&amp;quot;
	req, _ := NewRequest(&amp;quot;GET&amp;quot;, urlstr, nil)
	res, err := do(req)
	if err != nil {
		fmt.Println(err)
	} else {
		fmt.Println(res.Status)
	}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;urlã«å«ã¾ã‚Œã‚‹ãƒ›ã‚¹ãƒˆåã‹ã‚‰&lt;code&gt;pickupIP&lt;/code&gt;ã‚’ä½¿ã£ã¦1ã¤ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®æ–‡å­—åˆ—ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;func pickupIP(host string) (string, error)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®çµæœã‚’&lt;a href=&#34;https://golang.org/pkg/net/url/#URL&#34;&gt;&lt;code&gt;url.URL.Host&lt;/code&gt;&lt;/a&gt;ã«ä¸Šæ›¸ãã™ã‚‹ã“ã¨ã§&lt;code&gt;http://10.0.1.104/&lt;/code&gt;ã®ã‚ˆã†ãªIPã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚ˆã‚‹æ¥ç¶šã‚’è¡Œã„ã¾ã™ã€‚
ã•ã‚‰ã«ã€æ¥ç¶šå…ˆã‚µãƒ¼ãƒ“ã‚¹ãŒHostãƒ˜ãƒƒãƒ€ã®å€¤ã«ä¾å­˜ã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã®ã§&lt;a href=&#34;https://golang.org/pkg/net/http/#Request&#34;&gt;&lt;code&gt;http.Request.Host&lt;/code&gt;&lt;/a&gt;ã§ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ãƒ›ã‚¹ãƒˆåã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// set ipaddr to req.Host and
// keep the original `Host` header
req.Host = req.URL.Host
req.URL.Host = u.Host
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§ãƒ©ãƒ³ãƒ€ãƒ ãªIPã«ã‚ˆã‚‹æ¥ç¶šãŒå®Ÿç¾ã§ãã¾ã™ãŒã€æ³¨æ„ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;HTTP/HTTPSãƒªã‚¹ãƒŠãƒ¼ã¨ã—ã¦ã®ELBåã‹ã‚‰å¼•ã‘ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆã®ä¸¦ã³ã¯è² è·çŠ¶æ³ã‚‚è€ƒæ…®ã•ã‚Œã¦ã„ã¾ã™ã€‚ ã—ã‹ã—ã€ã“ã®å®Ÿè£…ã§ã¯ãã“ã¾ã§è€ƒæ…®ã—ã¦ãŠã‚‰ãšã€å˜ç´”ãªãƒ©ãƒ³ãƒ€ãƒ é¸æŠã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å‚è€ƒ: &lt;a href=&#34;http://dev.classmethod.jp/cloud/elb-configuration-guide-1/&#34;&gt;AWS ELBã®ç¤¾å†…å‘ã‘æ§‹æˆã‚¬ã‚¤ãƒ‰ã‚’å…¬é–‹ã—ã¦ã¿ã‚‹ è² è·åˆ†æ•£ç·¨ â€“ Cross-Zone Routingã‚’è¸ã¾ãˆã¦ ï½œ Developers.IO&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãã‚‚ãã‚‚ã€&lt;code&gt;net.LookupIP&lt;/code&gt;ã«RFC6724ã«ã‚ˆã‚‹ã‚½ãƒ¼ãƒˆã‚’å›é¿ã§ãã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã¨å¬‰ã—ã„ã®ã§ã™ãŒ&amp;hellip;&lt;/p&gt;

&lt;h3 id=&#34;pure-goã¨cgoã®2ã¤ã®åå‰è§£æ±ºã®å®Ÿè£…:165353d24c0bb1dfa78b677fc4ac1461&#34;&gt;Pure Goã¨cgoã®2ã¤ã®åå‰è§£æ±ºã®å®Ÿè£…&lt;/h3&gt;

&lt;p&gt;ä»Šå›ã®ä¸»é¡Œã‹ã‚‰ã¯ãã‚Œã¾ã™ãŒ&lt;code&gt;sortByRFC6724&lt;/code&gt;ã™ã‚‹ã¾ã§ã«è¡Œã‚ã‚Œã‚‹DNSå•ã„åˆã‚ã›ã®å®Ÿè£…ã¯Pure Goã¨cgoã®2ã¤ã‹ã‚‰é¸æŠãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://golang.org/pkg/net/#hdr-Name_Resolution&#34;&gt;Name Resolution | net - The Go Programming Language&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Pure Goã§ã‚ã‚Šã€ç’°å¢ƒå¤‰æ•°&lt;code&gt;GODEBUG=netdns=cgo&lt;/code&gt;ã§cgoã‚’æŒ‡å®šã§ããŸã‚Šã—ã¾ã™ã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;By default the pure Go resolver is used, because a blocked DNS request consumes only a goroutine, while a blocked C call consumes an operating system thread.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ãƒªã‚½ãƒ¼ã‚¹æ¶ˆè²»åŠ¹ç‡ãŒPure Goã®ã»ã†ãŒè‰¯ã„ã‹ã‚‰ã¨ã„ã†ã®ãŒPure GoãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚ã‚‹ç†ç”±ã®ã‚ˆã†ã§ã™ã€‚ã¨ãã«ç†ç”±ãŒãªã„é™ã‚Šã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ã§ã‚‚è‰¯ã„ã®ã§ã¯ãªã„ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ãŒã€æ˜ç¤ºçš„ã«æŒ‡å®šã—ãªã‘ã‚Œã°ã„ã‘ãªã„äº‹ä¾‹ãŒã‚ã£ãŸã‚‰èã„ã¦ã¿ãŸã„ã§ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ã•ã„ã”ã«:165353d24c0bb1dfa78b677fc4ac1461&#34;&gt;ã•ã„ã”ã«&lt;/h3&gt;

&lt;p&gt;ä»¥ä¸ŠãŒGoã®&lt;code&gt;net.LookupIP&lt;/code&gt;/&lt;code&gt;net.Dial&lt;/code&gt;ã®ä»•æ§˜ã¨ãã‚Œã«ä¼´ã„ç”Ÿã˜ã‚‹æ¥ç¶šçµŒè·¯ã®é¸æŠå•é¡Œã€ãã—ã¦ãã®å¯¾ç­–ã«ãªã‚Šã¾ã™ã€‚
å®Ÿéš›ã®ã¨ã“ã‚ELBã®å ´åˆã¯ã‚ˆã—ãªã«ã‚„ã£ã¦ãã‚Œã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªå•é¡Œã«ã¯ã¤ãªãŒã‚‰ãªã„å ´åˆãŒã»ã¨ã‚“ã©ã ã¨ã¯æ€ã„ã¾ã™ãŒã€
ã“ã®å†…éƒ¨ä»•æ§˜ã‚’çŸ¥ã‚‰ãªã„ã“ã¨ã§ãƒ‰ãƒãƒã‚Šã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã®ã§ã”æ³¨æ„ã‚’ã€‚ç§ã¯ã“ã®ä»•æ§˜ã«ãŸã©ã‚Šç€ãã¾ã§ã«çµæ§‹æ‰‹é–“å–ã£ã¦ã—ã¾ã„ã¾ã—ãŸğŸ˜¢&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>&#34;Go Programming Blueprints&#34;ã‚’èª­ã‚“ã </title>
      <link>http://blog.restartr.com/2015/10/15/go-programming-blueprints</link>
      <pubDate>Thu, 15 Oct 2015 19:54:29 +0900</pubDate>
      
      <guid>http://blog.restartr.com/2015/10/15/go-programming-blueprints</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;http://www.amazon.co.jp/gp/product/B00T4ACPA0)&#34;&gt;
&lt;img src=&#34;https://raw.githubusercontent.com/matryer/goblueprints/master/artwork/bookcover.jpg&#34; alt=&#34;Go Blueprints by Mat Ryer book cover&#34; /&gt;
&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.amazon.co.jp/gp/product/B00T4ACPA0&#34;&gt;Go Programming Blueprints - Solving Development Challenges with Golang&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ€è¿‘Kindleã§è³¼å…¥ã—ãŸã®ã§ã€ã§ã²ã¨ã¨ãŠã‚Šèª­ã‚“ã§å†™çµŒã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h3 id=&#34;æ¦‚è¦ã¨é›‘æ„Ÿ:8fb6d052d7c346df71849845ab713680&#34;&gt;æ¦‚è¦ã¨é›‘æ„Ÿ&lt;/h3&gt;

&lt;p&gt;2015å¹´1æœˆã«ç™ºå£²ã•ã‚ŒãŸæ›¸ç±ã§ã‚ã‚Šã€Goã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã„ã†ã¨1.3ã‹ã‚‰1.4ã®é ƒã«æ›¸ã‹ã‚ŒãŸã‚‚ã®ã§ã™ã€‚
è‘—è€…ã¯Golang UK Conference 2015ã§ãƒˆãƒ¼ã‚¯ã‚‚ã—ã¦ã„ãŸ&lt;a href=&#34;https://twitter.com/matryer&#34;&gt;@matryer&lt;/a&gt;ã•ã‚“ã€‚
(&lt;em&gt;â€»&lt;a href=&#34;https://www.youtube.com/watch?v=tIm8UkSf6RA&#34;&gt;Golang UK Conference 2015 - Mat Ryer - Building APIs - YouTube&lt;/a&gt;&lt;/em&gt;)&lt;/p&gt;

&lt;p&gt;ã„ãã¤ã‹ã®Goè£½ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚’é€šã˜ã¦ã€Goã®æ©Ÿèƒ½ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å­¦ç¿’ã™ã‚‹ã€ã¨ã„ã†æ„Ÿã˜ã®ã‚‚ã®ã€‚æ©Ÿèƒ½ã‚„ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦ç¶²ç¾…çš„ã§ã¯ãªã„ã‚‚ã®ã®ã€ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã‚‹ãŸã‚ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç†è§£ã¯å®¹æ˜“ã«æ„Ÿã˜ã¾ã™ã€‚å–ã‚Šæ‰±ã†ãƒˆãƒ”ãƒƒã‚¯ã‚‚ã€web/apiã‚µãƒ¼ãƒãƒ¼ã¨ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ãŒãƒãƒ©ãƒ³ã‚¹ã‚ˆãå–ã‚Šä¸Šã’ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å¯¾è±¡èª­è€…ã¯ã€Œã™ã¹ã¦ã®Goãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã€ã¨è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ãŒã€&lt;a href=&#34;https://tour.golang.org&#34;&gt;A Tour of Go&lt;/a&gt;ã‚’ã²ã¨ã¨ãŠã‚Šã‚„ã£ãŸã‚ã¨ãã‚‰ã„ãŒã¡ã‚‡ã†ã©è‰¯ã„æ°—ãŒã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹çš„ãªæ§‹æˆã®ä»–æ›¸ã‚„&lt;a href=&#34;https://golang.org/doc/effective_go.html&#34;&gt;Effective Go&lt;/a&gt;ã®ã‚ˆã†ãªå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚‚ã®ã¨ã†ã¾ãã™ã¿åˆ†ã‘ãŒã§ãã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã¨ã€‚&lt;/p&gt;

&lt;p&gt;ãŸã èª¤å­—ãƒ»è„±å­—ãŒå°‘ã—ç›®ç«‹ã¤ã‹ãªï¼ˆç« ã”ã¨ã«1,2å€‹ç¨‹åº¦ã§ã™ãŒ)ã¨ã„ã†ç‚¹ãŒæ®‹å¿µã§ã¯ã‚ã‚Šã¾ã™ãŒã€æ¯”è¼ƒçš„ã‚ã‹ã‚Šã‚„ã™ã„ãƒŸã‚¹ãªã®ã§èª­ã‚“ã§ã„ã¦æ··ä¹±ã™ã‚‹ã»ã©ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/golang/go/wiki/Books&#34;&gt;Go Books&lt;/a&gt;ã¨ã—ã¦ã¯æ¯”è¼ƒçš„ãƒã‚¤ãƒŠãƒ¼ã£ã½ãã€æ—¥æœ¬èªåœã®æƒ…å ±ã‚‚ãªã„ã®ã§è³¼å…¥ã¯ã¡ã‚‡ã£ã¨ã—ãŸã‚®ãƒ£ãƒ³ãƒ–ãƒ«ã§ã—ãŸãŒã€ã‚ã‚‹ç¨‹åº¦ã¾ã¨ã¾ã£ãŸã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¨ã—ã¦èª­ã‚ã‚‹Goé–¢é€£ã®æ›¸ç±ã¯å°‘ãªã„å°è±¡ã§ã™ã—ã€è‡ªåˆ†ã¨ã—ã¦ã¯ã¡ã‚‡ã†ã©è‰¯ã„è²·ã„ç‰©ã ã£ãŸã‹ãªã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;em&gt;â€»ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚‚&lt;a href=&#34;https://github.com/matryer/goblueprints&#34;&gt;matryer/goblueprints&lt;/a&gt;ã«å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;_â€»å½“ç„¶è‹±èªã§ã™ãŒã€ã•ã»ã©èª­ã¿ã«ãã„æ„Ÿã˜ã¯ãªã‹ã£ãŸã§ã™&lt;/p&gt;

&lt;h3 id=&#34;æ§‹æˆ:8fb6d052d7c346df71849845ab713680&#34;&gt;æ§‹æˆ&lt;/h3&gt;

&lt;p&gt;å…¨8ç« ã§ä½œæˆã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã†ã¡ã€1ç« ã§ç°¡æ½”ã™ã‚‹ã‚‚ã®ã¨ç« ã‚’ã¾ãŸãŒã‚‹ã‚‚ã®ãŒã‚ã‚Šã€æ§‹æˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h4 id=&#34;1-2-3-websocketã«ã‚ˆã‚‹ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³:8fb6d052d7c346df71849845ab713680&#34;&gt;1, 2, 3: websocketã«ã‚ˆã‚‹ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;http.Handle/HandleFuncã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã¨ã‹ã€TDDã«ã‚ˆã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™ºã€&lt;/li&gt;
&lt;li&gt;ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã®è¿½åŠ (OAuthã¯&lt;a href=&#34;https://github.com/stretchr/gomniauth&#34;&gt;stretchr/gomniauth&lt;/a&gt;ã‚’åˆ©ç”¨)&lt;/li&gt;
&lt;li&gt;ã‚¢ã‚¤ã‚³ãƒ³ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã®è¿½åŠ &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;4-ç©ºããƒ‰ãƒ¡ã‚¤ãƒ³æ¤œç´¢ãƒ„ãƒ¼ãƒ«:8fb6d052d7c346df71849845ab713680&#34;&gt;4: ç©ºããƒ‰ãƒ¡ã‚¤ãƒ³æ¤œç´¢ãƒ„ãƒ¼ãƒ«&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Unixã‚³ãƒãƒ³ãƒ‰ã®ã‚ˆã†ã«ã€STDIN/OUTã‚’ä½¿ã£ãŸè¤‡æ•°ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚‹é€£æº

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$ å˜èªç”Ÿæˆ | å˜èªã®è£œæ­£ | TLDã®ä»˜ä¸ | WHOISãƒã‚§ãƒƒã‚¯&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ã“ã‚Œã‚‰ã‚’os.Command.Stdin,Stdoutã§æŸã­ã‚‹ã‚³ãƒãƒ³ãƒ‰&lt;/li&gt;
&lt;li&gt;&lt;em&gt;.o(ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚‚è‰¯ã„ã®ã§ã¯ã¨æ€ã„ã¾ã™ãŒã€å¤–éƒ¨ãƒ—ãƒ­ã‚»ã‚¹ã¨ã®é€£æºã®ç·´ç¿’ã¨ã„ã†ã“ã¨ã§&amp;hellip;)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;5-6-twitterã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼:8fb6d052d7c346df71849845ab713680&#34;&gt;5, 6: Twitterã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ã§æ§‹æˆã•ã‚Œã‚‹åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ 

&lt;ol&gt;
&lt;li&gt;twitter streaming apiã‹ã‚‰æ‹¾ã£ãŸãƒ„ã‚¤ãƒ¼ãƒˆã‚’&lt;a href=&#34;http://nsq.io&#34;&gt;NSQ&lt;/a&gt;ã«è¿½åŠ ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ &lt;/li&gt;
&lt;li&gt;NSQã®subscriberãŒå˜èªåˆ¥ä»¶æ•°ã‚’é›†è¨ˆã—ã¦ã€1ç§’ã”ã¨ã«MongoDBã‚’æ›´æ–°ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ &lt;/li&gt;
&lt;li&gt;MongoDBã®å†…å®¹ã‚’ç®¡ç†ãƒ»é–²è¦§ãƒ„ãƒ¼ãƒ«(RESTful APIã¨WEBã‚¢ãƒ—ãƒª)&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãƒˆãƒ”ãƒƒã‚¯&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ã‚·ã‚°ãƒŠãƒ«ãƒˆãƒ©ãƒƒãƒ—ã«ã‚ˆã‚‹å®‰å…¨ãªãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†å‡¦ç†&lt;/li&gt;
&lt;li&gt;sync.Mutexã«ã‚ˆã‚‹å”èª¿å‹•ä½œã®å®Ÿè£…&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/stretchr/graceful&#34;&gt;stretchr/graceful&lt;/a&gt;ã§ã®å®‰å…¨ãªçµ‚äº†å‡¦ç†&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;7-google-places-apiã‚’ä½¿ã£ãŸãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¨è–¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³:8fb6d052d7c346df71849845ab713680&#34;&gt;7: Google Places APIã‚’ä½¿ã£ãŸãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¨è–¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;iotaã«ã‚ˆã‚‹Enumç›¸å½“ã®å®Ÿç¾&lt;/li&gt;
&lt;li&gt;TDDã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™º

&lt;ul&gt;
&lt;li&gt;&lt;em&gt;.o(ã“ã“ã§&lt;a href=&#34;https://github.com/cheekybits&#34;&gt;cheekybits/is&lt;/a&gt;ãŒå‡ºã¦ããŸã‘ã©ã€å…¨ä½“ã§çµ±ä¸€æ„Ÿå‡ºã—ã¦ã»ã—ã„&amp;hellip;)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ã‚­ãƒ£ã‚¹ãƒˆ&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;8-ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ :8fb6d052d7c346df71849845ab713680&#34;&gt;8 ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ &lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;2ã¤ã®CLIãƒ„ãƒ¼ãƒ«ã®ä½œæˆ

&lt;ul&gt;
&lt;li&gt;backup: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹å¯¾è±¡ãƒªã‚¹ãƒˆã®ç®¡ç†ã‚³ãƒãƒ³ãƒ‰

&lt;ul&gt;
&lt;li&gt;ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã¯&lt;a href=&#34;https://github.com/mattyer/filedb&#34;&gt;mattyer/filedb&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;backupd: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ã‚‚ã¨ã«å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Ÿè¡Œã™ã‚‹å¸¸é§ãƒ—ãƒ­ã‚°ãƒ©ãƒ &lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;è›‡è¶³:8fb6d052d7c346df71849845ab713680&#34;&gt;è›‡è¶³&lt;/h3&gt;

&lt;p&gt;ãã†ã„ãˆã°ã€ã‚«ãƒ¼ãƒ‹ãƒãƒ³è‘—ã®The Go Programming LanguageãŒ11æœˆç™ºå£²ã¨ã®ã“ã¨&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.amazon.co.jp/gp/product/0134190440&#34;&gt;The Go Programming Language&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Goã®json.Marshal/Unmarshalã®ä»•æ§˜ã‚’æ•´ç†ã—ã¦ã¿ã‚‹</title>
      <link>http://blog.restartr.com/2014/08/13/golang-json-marshal-unmarshal</link>
      <pubDate>Wed, 13 Aug 2014 00:02:42 +0900</pubDate>
      
      <guid>http://blog.restartr.com/2014/08/13/golang-json-marshal-unmarshal</guid>
      <description>

&lt;h3 id=&#34;tl-dr:95b5ef122b0628eff42f880d34516c78&#34;&gt;TL;DR&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;goã®æ§‹é€ ä½“ã«ã¤ã‘ã‚‹ã‚¿ã‚°ã¯ã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒä¸æ­£ã ã¨èª­ã¿è¾¼ã¾ã‚Œãªã„(å½“ç„¶)&lt;/li&gt;
&lt;li&gt;json.Marshalã¯ã€æ§‹é€ ä½“ã®jsonã‚¿ã‚°ãŒã‚ã‚Œã°ãã®å€¤ã‚’ã‚­ãƒ¼ã¨ã—ã¦JSONæ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹&lt;/li&gt;
&lt;li&gt;json.Unmarshalã¯ã€æ§‹é€ ä½“ã®jsonã‚¿ã‚°ãŒã‚ã‚Œã°ãã®å€¤ã‚’å¯¾å¿œã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹

&lt;ul&gt;
&lt;li&gt;jsonã‚¿ã‚°ãŒãªã‘ã‚Œã°ã€å®Œå…¨ä¸€è‡´ã‚‚ã—ãã¯case-insensitiveãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã§ã¯ã€ã²ã¨ã¤ã¥ã¤ç¢ºèªã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;goã®æ§‹é€ ä½“ã«ã¤ã‘ã‚‹ã‚¿ã‚°ã¯-ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒä¸æ­£ã ã¨èª­ã¿è¾¼ã¾ã‚Œãªã„-å½“ç„¶:95b5ef122b0628eff42f880d34516c78&#34;&gt;goã®æ§‹é€ ä½“ã«ã¤ã‘ã‚‹ã‚¿ã‚°ã¯ã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒä¸æ­£ã ã¨èª­ã¿è¾¼ã¾ã‚Œãªã„(å½“ç„¶)&lt;/h3&gt;

&lt;p&gt;goã®æ§‹é€ ä½“ã«ã¯ã‚¿ã‚°ã®æ©Ÿèƒ½ãŒã‚ã£ã¦ã€å‹ã®å¾Œã«ç‰¹å®šã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒè¨˜è¿°ã§ãã¾ã™&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type MyType struct {
  Hoge string `foo:&amp;quot;1&amp;quot; bar:&amp;quot;2&amp;quot;`
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;key:&amp;quot;value&amp;quot;&lt;/code&gt;ã‚’ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§è¤‡æ•°ã‹ã‘ã¾ã™ã€‚
ã§ã€ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;t := reflect.TypeOf(MyType{})
tagFoo := t.Field(0).Get(&amp;quot;foo&amp;quot;)
tagBar := t.Field(0).Get(&amp;quot;bar&amp;quot;)
fmt.Printf(&amp;quot;foo=%s, bar=%s\n&amp;quot;, tagFoo, tagBar)
// foo=1, bar=2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚¿ã‚°ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒä¸æ­£ãªå ´åˆã¯ã€å€¤ãŒç©ºã«ãªã‚Šã¾ã™ã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type MyType struct {
  Hoge string `foo:1`
}
t := reflect.TypeOf(MyType{})
tagFoo := t.Field(0).Get(&amp;quot;foo&amp;quot;)
fmt.Printf(&amp;quot;foo=%#v\n&amp;quot;, tagFoo)
// foo=&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ã‚¨ãƒ©ãƒ¼ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹å‰ã«æ¤œçŸ¥ã™ã‚‹ã«ã¯ã€&lt;code&gt;go vet&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ go vet my_type.go
my_type.go:10: struct field tag `foo:1` not compatible with reflect.StructTag.Get
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ãã‚Œã°&lt;code&gt;go compile&lt;/code&gt;å®Ÿè¡Œã—ãŸã¨ãã«è‡ªå‹•çš„ã«ãƒã‚§ãƒƒã‚¯ã—ã¦ã»ã—ã„ã¨ã“ã‚ã§ã™ãŒâ€¦&lt;/p&gt;

&lt;p&gt;ã§ã€jsonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®Marshal/Unmarshalã¯ã€ã“ã®ã‚¿ã‚°ã‚’ä½¿ã£ã¦ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;json-marshalã¯-æ§‹é€ ä½“ã®jsonã‚¿ã‚°ãŒã‚ã‚Œã°ãã®å€¤ã‚’ã‚­ãƒ¼ã¨ã—ã¦jsonæ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹:95b5ef122b0628eff42f880d34516c78&#34;&gt;json.Marshalã¯ã€æ§‹é€ ä½“ã®jsonã‚¿ã‚°ãŒã‚ã‚Œã°ãã®å€¤ã‚’ã‚­ãƒ¼ã¨ã—ã¦JSONæ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹&lt;/h3&gt;

&lt;p&gt;json.Marshalã¯æ§‹é€ ä½“ã‹ã‚‰JSONæ–‡å­—åˆ—ã¸ã®å¤‰æ›ã™ã‚‹é–¢æ•°ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type MyType struct {
  A string
  FooBar string
}

mt := MyType{&amp;quot;aaaa&amp;quot;, &amp;quot;baz&amp;quot;}
b, _ := json.Marshal(mt)
fmt.Printf(&amp;quot;%s\n&amp;quot;, string(b))
// {&amp;quot;A&amp;quot;:&amp;quot;aaaa&amp;quot;,&amp;quot;FooBar&amp;quot;:&amp;quot;baz&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ™®é€šã«ã‚„ã‚‹ã¨ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åãŒãã®ã¾ã¾JSONã®ã‚­ãƒ¼ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã§æ§‹é€ ä½“ã®ã‚¿ã‚°æ©Ÿèƒ½ã‚’ã¤ã‹ã£ã¦ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›¸ãã“ã¨ã§ã€ä»»æ„ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã§JSONãŒç”Ÿæˆã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type MyType struct {
  A string `json:&amp;quot;a&amp;quot;`
  FooBar string `json:&amp;quot;foo_bar&amp;quot;`
}

mt := MyType{&amp;quot;aaaa&amp;quot;, &amp;quot;baz&amp;quot;}
b, _ := json.Marshal(mt)
fmt.Printf(&amp;quot;%s\n&amp;quot;, string(b))
// {&amp;quot;a&amp;quot;:&amp;quot;aaaa&amp;quot;,&amp;quot;foo_bar&amp;quot;:&amp;quot;baz&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æŒ‡å®šã—ãŸ&amp;rdquo;a&amp;rdquo;ãŒJSONã®ã‚­ãƒ¼ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;json-unmarshalã¯-æ§‹é€ ä½“ã®jsonã‚¿ã‚°ãŒã‚ã‚Œã°ãã®å€¤ã‚’å¯¾å¿œã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹:95b5ef122b0628eff42f880d34516c78&#34;&gt;json.Unmarshalã¯ã€æ§‹é€ ä½“ã®jsonã‚¿ã‚°ãŒã‚ã‚Œã°ãã®å€¤ã‚’å¯¾å¿œã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹&lt;/h3&gt;

&lt;p&gt;json.Unmarshalã¯JSONæ–‡å­—åˆ—ã‹ã‚‰æ§‹é€ ä½“ã¸å¤‰æ›ã™ã‚‹é–¢æ•°ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã¯ã‚¿ã‚°ãªã—ã®ãƒ‘ã‚¿ãƒ¼ãƒ³&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;type MyType struct {
  A string
  FooBar string
}

var mt MyType
json.Unarshal([]byte(`{&amp;quot;A&amp;quot;:&amp;quot;aaa&amp;quot;, &amp;quot;FooBar&amp;quot;:&amp;quot;baz&amp;quot;}`, &amp;amp;mt)
fmt.Printf(&amp;quot;%#v\n&amp;quot;, mt) // main.MyType{A:&amp;quot;aaaa&amp;quot;,FooBar:&amp;quot;baz&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;JSONã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åãŒsnake_caseã®ãƒ‘ã‚¿ãƒ¼ãƒ³&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;var mt MyType
json.Unarshal([]byte(`{&amp;quot;a&amp;quot;:&amp;quot;aaa&amp;quot;,&amp;quot;foo_bar&amp;quot;:&amp;quot;baz&amp;quot;}`, &amp;amp;mt)
fmt.Printf(&amp;quot;%#v\n&amp;quot;, mt) // main.MyType{A:&amp;quot;aaaa&amp;quot;, FooBar:&amp;quot;&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã“ã§ã€Œã‚“ï¼Ÿã€ã¨ãªã‚‹ã‚ã‘ã§ã™ã€‚ã‚¿ã‚°ã«ã‚ˆã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒãªã„ã®ã«ãªãœå°æ–‡å­—ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã¡ã‚ƒã‚“ã¨èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã®ã‹â€¦ã¨ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ä»•æ§˜ã€json.Unmarshalã®godocã«ã¡ã‚ƒã‚“ã¨æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://golang.org/pkg/encoding/json/#Unmarshal&#34;&gt;func Unmarshal&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;To unmarshal JSON into a struct, Unmarshal matches incoming object keys to the keys used by Marshal (either the struct field name or its tag), preferring an exact match but also accepting a case-insensitive match.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ã©ã†ã‚„ã‚‰ã€json.Unmarshalã¯ã€JSONã«å«ã¾ã‚Œã‚‹ã‚­ãƒ¼ã¨å®Œå…¨ä¸€è‡´ã‹ã€case-insensitiveã«ä¸€è‡´ã™ã‚‹æ§‹é€ ä½“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ä»•æ§˜ã¨ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€snake_caseãªJSONã®ã‚­ãƒ¼ã¯ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒãªã„ã¨ãƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚Œãšç„¡è¦–ã•ã‚Œã¾ã™ã€‚ï¼ˆæ§‹é€ ä½“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦snale_caseãŒå­˜åœ¨ã—ãªã„é™ã‚Šã¯)&lt;/p&gt;

&lt;h3 id=&#34;çµŒç·¯:95b5ef122b0628eff42f880d34516c78&#34;&gt;çµŒç·¯&lt;/h3&gt;

&lt;p&gt;å…ˆæ—¥ã€&lt;a href=&#34;http://connpass.com/event/7914/&#34;&gt;ãƒ’ã‚«ãƒ«ã®GO! hikarie.go #2&lt;/a&gt;ã§&lt;a href=&#34;https://twitter.com/yosuke_furukawa&#34;&gt;@yosuke_furukawa&lt;/a&gt;ã•ã‚“ã«ã‚ˆã‚‹Goã§JSON APIã‚’æ›¸ã„ã¦ã¿ã‚‹ã¨ã„ã†ãƒãƒ³ã‚ºã‚ªãƒ³ã‚’ä½“é¨“ã—ã¦ãã¾ã—ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/yosuke-furukawa/golang-study&#34;&gt;yosuke-furukawa/golang-study&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãã“ã§ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ãŸæ§‹é€ ä½“ã‚’ä½¿ã£ã¦Marshalã—ãŸæ™‚ã«ã€æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ãŒã“ã‚Œã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type User struct {
  Name string `json:name`
}
user := User{&amp;quot;restartr&amp;quot;}
b, _ := json.Marshal(user)
fmt.Printf(&amp;quot;%s\n&amp;quot;, string(b)) // {&amp;quot;Name&amp;quot;:&amp;quot;restartr&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å°æ–‡å­—ã§å‡ºåŠ›ã—ã¦ã»ã—ã„ã®ã«ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒåŠ¹ã‹ãªã„â€¦ã¨ãªã£ãŸã‚ã‘ã§ã™ã€‚
ä»–ã®å‚åŠ è€…ãŒ&lt;code&gt;json:&amp;quot;name&amp;quot;&lt;/code&gt;ã§ãªã„ã¨ã„ã‘ãªã„ã“ã¨ã«æ°—ã¥ã„ã¦ã€ã“ã®ä»¶ã¯ä¸€ä»¶è½ç€ã€‚&lt;/p&gt;

&lt;p&gt;ã ã£ãŸã®ã§ã™ãŒã€ã‚‚ã†å°‘ã—è©³ã—ãèª¿ã¹ã‚‹ã¨ä¸Šã«æ•´ç†ã—ãŸã‚ˆã†ãªä»•æ§˜ãŒè¦‹ãˆã¦ããŸã¨ã„ã†ã‚ã‘ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type User struct {
  Name string `json:name` // å®Ÿéš›ã¯ç„¡è¦–ã•ã‚Œã¦ã„ã‚‹
}
var user User
json.Unmarshal([]byte(`{&amp;quot;name&amp;quot;:&amp;quot;restartr&amp;quot;}`, &amp;amp;user)
fmt.Printf(&amp;quot;%s\n&amp;quot;, user) // main.User{Name:&amp;quot;restartr&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Ÿã¯ã“ã®æ™‚æ›¸ã„ãŸ&lt;code&gt;json:name&lt;/code&gt;ã¨ã„ã†ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ä¸æ­£ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ã—ã¦ç„¡è¦–ã•ã‚Œã¦ã„ã¦ã€ãŸã¾ãŸã¾User.Nameã¨ã„ã†ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«case-insensitiveã§Unmarshalã—ãŸæ™‚ã«ãƒãƒƒãƒ”ãƒ³ã‚°ãŒã§ãã¦ã„ãŸã«ã™ããªã‹ã£ãŸã‚ˆã†ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¨ã¾ããã‚“ãªæ„Ÿã˜ã§JSONã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦æ­£ã—ã„çŸ¥è­˜ã‚’å¾—ã‚‰ã‚ŒãŸã®ã§ã™ãŒã€ä¸€äººã§ã‚„ã£ã¦ãŸæ™‚ã«ã¯æ°—ã¥ã‹ãªã‹ã£ãŸç–‘å•ã¨ã‹çŸ¥è­˜ã¨ã—ã¦ä¸è¶³ã—ã¦ã„ã‚‹ç‚¹ã«æ°—ä»˜ã‘ã‚‹ã®ã§ã€ãƒãƒ³ã‚ºã‚ªãƒ³å½¢å¼ã‚‚è‰¯ã„ã‚‚ã®ã§ã™ã­ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Dockerè¬¹è£½ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®libchanã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ãŸ</title>
      <link>http://blog.restartr.com/2014/06/28/about-docker-libchan</link>
      <pubDate>Sat, 28 Jun 2014 14:44:23 +0900</pubDate>
      
      <guid>http://blog.restartr.com/2014/06/28/about-docker-libchan</guid>
      <description>

&lt;p&gt;DockerCon2014ã§ç™ºè¡¨ã•ã‚ŒãŸ&lt;a href=&#34;https://github.com/docker/libchan&#34;&gt;libchan&lt;/a&gt;ã«ã¤ã„ã¦èª¿ã¹ãŸã“ã¨ã‚’ã¾ã¨ã‚ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;libchanã¯&lt;a href=&#34;https://github.com/docker/libcontainer&#34;&gt;libcontainer&lt;/a&gt;ã‚„&lt;a href=&#34;https://github.com/docker/libswarm&#34;&gt;libswarm&lt;/a&gt;ã¨å…±ã«ç™ºè¡¨ã•ã‚Œã¾ã—ãŸã€‚
libswarmã¯Dockerã‚’ä¸­å¿ƒã«ã—ãŸã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ãƒ™ãƒ³ãƒ€ãƒ¼ãƒ­ãƒƒã‚¯ã‚¤ãƒ³ã‚’å›é¿ã™ã‚‹ãŸã‚ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚Šã€libcontainerã¯&lt;a href=&#34;http://d.hatena.ne.jp/mainyaa/20140311/p1&#34;&gt;Docker 0.9ãƒªãƒªãƒ¼ã‚¹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ—¥æœ¬èªè¨³: Execution driversã¨libcontainerå°å…¥ - Happy New World&lt;/a&gt;ã‚’å‚ç…§ã™ã‚‹ã®ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ã§ã¯ã€libchanã¨ã¯ä½•ãªã®ã§ã—ã‚‡ã†ã‹ã€‚&lt;/p&gt;

&lt;p&gt;READMEã«ã¯&lt;code&gt;like Go channels over the network&lt;/code&gt;ã¨ã‚ã‚Šã¾ã™ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã®go channel?ã‚ˆãã‹ã‚Šã¾ã›ã‚“ã­ã€‚ã€‚ã€‚&lt;/p&gt;

&lt;p&gt;README.mdã¨PROTOCOL.mdã€ã„ãã¤ã‹ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ã‚‚ã¨ã«ç°¡å˜ãªå®Ÿè£…ã‚’ã—ã¦ã¿ãŸçµæœã‚’ã¾ã¨ã‚ã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;libchanã¨ã¯ãªã«ã‹:420542fbd67b0f03cfaa082edb6d06ae&#34;&gt;libchanã¨ã¯ãªã«ã‹&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/docker/libchan/README.md&#34;&gt;README&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;libchanã¯è¶…è»½é‡ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚Šã€å¤šæ§˜ãªé€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®åœŸå°ã¨ãªã‚‹ã‚‚ã®ã§ã™ã€‚
åŒä¸€ãƒ—ãƒ­ã‚»ã‚¹å†…ã§ã‚‚ã€åŒä¸€ãƒ›ã‚¹ãƒˆã®åˆ¥ãƒ—ãƒ­ã‚»ã‚¹é–“ã§ã‚‚ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’è¶…ãˆãŸåˆ¥ãƒ›ã‚¹ãƒˆã®åˆ¥ãƒ—ãƒ­ã‚»ã‚¹é–“ã§ã‚‚åŒæ–¹å‘é€šä¿¡å¯èƒ½ã«ã™ã‚‹ãŸã‚ã®åŸºç¤çš„ãªAPIã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚
ãƒ¢ãƒ€ãƒ³ãªmicro-serviesãªã©RPCã‚„RESTãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«ã¯ãƒ•ã‚£ãƒƒãƒˆã—ãªã„é ˜åŸŸã§ã€libchanã‚’ä½¿ã†ã“ã¨ãŒæƒ³å®šã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;åˆ©ç”¨ä¾‹ã¯ã„ã¾ã®ã¨ã“ã‚libswarmã®ã¿ã§ã™ã€‚ã¨ã„ã†ã‹libswarmã‹ã‚‰æŠ½å‡ºã•ã‚ŒãŸæ±ç”¨çš„ãªé€šä¿¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã¨æ€ã„ã¾ã™ã€‚
APIãŒå®‰å®šã—ã¦ãã‚‹ã¨ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ç­‰ã¸ã®å°å…¥ãªã©ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ã§ã¯ã€å…·ä½“çš„ã«ã©ã†ã‚„ã£ã¦åŒæ–¹å‘é€šä¿¡ã‚’å¯èƒ½ã«ã—ã¦ã‚‹ã®ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;libchanã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«:420542fbd67b0f03cfaa082edb6d06ae&#34;&gt;libchanã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/docker/libchan/PROTOCOL.md&#34;&gt;PROTOCOL&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;libchanã¯ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;channel&lt;/li&gt;
&lt;li&gt;session&lt;/li&gt;
&lt;li&gt;message&lt;/li&gt;
&lt;li&gt;byte stream&lt;/li&gt;
&lt;li&gt;nesting&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;channelã¨ã¯ã€ä¸¦è¡Œãƒ—ãƒ­ã‚°ãƒ©ãƒ é–“ã®åŒæ–¹å‘é€šä¿¡ç”¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚goã®channelã«ä¼¼ã¦ã‚‹ã‘ã©ãã®ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Sender/ReceiverãŒãã‚Œãã‚Œ1æ–¹å‘ãšã¤ã®çµŒè·¯ã‚’æŒã¤ãŸã‚ã€ã‚½ã‚±ãƒƒãƒˆã¨ã„ã†ã‚ˆã‚Šãƒ‘ã‚¤ãƒ—ã®æ¦‚å¿µã«è¿‘ã„ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ï¼’ã¤ã®é€šä¿¡çµŒè·¯ãŒsessionã¨ãªã‚Šã€ãã®é–“ã‚’æµã‚Œã‚‹ã®ãŒbyte streamã€‚
ã§ã€byte streamã«ã¯messageãŒä¹—ã£ã‹ã‚Šã€messageã«ã¯channelã‚’å«ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†æ¦‚å¿µã§ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;libchanã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:420542fbd67b0f03cfaa082edb6d06ae&#34;&gt;libchanã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸&lt;/h3&gt;

&lt;p&gt;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯libchan.Messageã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type libchan.Message struct {
  Data []byte // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹
  Fd *os.File
  Ret Sender  // å—ä¿¡è€…ãŒè¿”ç­”ã™ã‚‹ãŸã‚ã®channel
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹ã‚’ã€å„ç¨®é€šä¿¡æ–¹å¼ã«å¯¾å¿œã—ãŸSender/ReceiverçµŒç”±ã§ã‚„ã‚Šã¨ã‚Šã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ§‹é€ åŒ–:420542fbd67b0f03cfaa082edb6d06ae&#34;&gt;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ§‹é€ åŒ–&lt;/h3&gt;

&lt;p&gt;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ç”Ÿæˆã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;message := libchan.Message{Data: []byte(&amp;quot;Hello, libchan&amp;quot;), Ret: libchan.RetPipe}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ã€ãŸã ã®ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ãªãæ§‹é€ åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚‚é€ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;import &amp;quot;github.com/docker/libchan/data&amp;quot;

d := data.Empty().Set(&amp;quot;foo&amp;quot;, &amp;quot;bar&amp;quot;)
d.Get(&amp;quot;foo&amp;quot;) // &amp;quot;bar&amp;quot;
d.Pretty() // foo=bar
message := libchan.Message{Data: d, Ret: libchan.RetPipe))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¡ãªã¿ã«ã€å„ãƒ¡ã‚½ãƒƒãƒ‰(Add,Set,Get,Del)ã¯Messageã®ãƒã‚¤ãƒ³ã‚¿ã‚’ã‹ãˆã•ãªã„ã®ã§ã€å¤‰æ•°ã‚’ä¸Šæ›¸ãã™ã‚‹ã‹ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ã‚¤ãƒ³ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡:420542fbd67b0f03cfaa082edb6d06ae&#34;&gt;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡&lt;/h3&gt;

&lt;p&gt;ä½œæˆã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚’SenderçµŒç”±ã§é€ã‚Šã¾ã™ã€‚ï¼ˆã“ã“ã§ã®Sender/Receiverã¯æ“¬ä¼¼ã‚³ãƒ¼ãƒ‰ã§ã™ï¼‰&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;sender.Send(&amp;amp;libchan.Message{Data: []byte(msg)})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ã€ReceiverãŒå—ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯&lt;code&gt;data.Decode()&lt;/code&gt;ã§&lt;code&gt;map[string][]string&lt;/code&gt;ã«å¤‰æ›ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;message, _ := receiver.Receive(0)
decoded, _ := data.Decode(string(message.Data))
fmt.Printf(&amp;quot;%$v\n&amp;quot;, docoded) // map[string][]string{&amp;quot;foo&amp;quot;:[]string{&amp;quot;bar&amp;quot;}}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;sender-receiver:420542fbd67b0f03cfaa082edb6d06ae&#34;&gt;Sender/Receiver&lt;/h3&gt;

&lt;p&gt;å®Ÿéš›ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€å—ä¿¡ã™ã‚‹ã®ã¯ã€Send/Receiverãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤interfaceã‚’å®Ÿè£…ã—ãŸã‚‚ã®ã‚’ä½¿ã„ã¾ã™ã€‚
å®šç¾©ã¯ã ã„ãŸã„ã“ã‚“ãªã‹ã‚“ã˜ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type Sender interface {
  Send(msg *Message) (Receiver, error)
}

func (s *Sender) Send(msg *libchan.Message) (libchan.Receiver, error)

type Receiver interface {
  Receiver(mode int) (*Message, error)
}

func (r *Receiver) Receive(mode int) (*libchan.Message, error)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸»è¦ãªå®Ÿè£…ã¯ä»¥ä¸‹&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/docker/libchan/blob/master/nop.go&#34;&gt;nop&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/docker/libchan/blob/master/inmem.go&#34;&gt;inmem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/docker/libchan/blob/master/unix&#34;&gt;unix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/docker/libchan/blob/master/http2&#34;&gt;http2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;inmem-in-memory-go-channel:420542fbd67b0f03cfaa082edb6d06ae&#34;&gt;inmem (In-memory Go channel)&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/docker/libchan/blob/master/inmem_test.go&#34;&gt;inmem_test.go&lt;/a&gt;ã‚’å‚è€ƒã«å®Ÿè£…ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã¯&lt;code&gt;libchan.Pipe()&lt;/code&gt;ã‚’ä½¿ã£ã¦ã€receiver/senderã‚’å–å¾—ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;receiver, sender := libchan.Pipe()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€ä¿¡å´ã¯gorutineå†…ã§senderçµŒç”±ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¦ã€é€ä¿¡å´ã‹ã‚‰å—ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾ã—ã¦ã•ã‚‰ã«è¿”ä¿¡ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;go func() {
  recv, _ := sender.Send(&amp;amp;libchan.Message{
    Data: []byte(&amp;quot;Hello&amp;quot;),
    Ret: libchan.RetPipe,
  )
  msg, _ := recv.Receive(0) // mode=0ã§è‡ªå‹•Close()
  fmt.Println(string(msg.Data)) // &amp;quot;World&amp;quot;
}()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å—ä¿¡å´ã¯receiverçµŒç”±ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ã—ã¦ã€ãã‚Œã«å¯¾ã—ã¦è¿”ä¿¡ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;msg, err := receiver.Receive(libchan.Ret)
fmt.Println(string(msg.Data)) // &amp;quot;Hello&amp;quot;
// msg.RetãŒè¿”ä¿¡ç”¨ã®channelã¨ãªã£ã¦ã„ã‚‹
_, err := msg.Ret.Send(&amp;amp;libchan.Message{Data: []byte(&amp;quot;World&amp;quot;)})
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;unix-http2ã®å®Ÿè£…:420542fbd67b0f03cfaa082edb6d06ae&#34;&gt;unix/http2ã®å®Ÿè£…&lt;/h3&gt;

&lt;p&gt;ãã‚Œãã‚Œã«ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã®ã§è¦—ã„ã¦ã¿ã‚‹ã¨ã ã„ãŸã„ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã¤ã‹ã‚ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/docker/libchan/blob/master/unix/unix_test.go&#34;&gt;unix/unix_test.go&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/docker/libchan/blob/master/http2/listener_test.go&#34;&gt;http2/listener_test.go&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚:420542fbd67b0f03cfaa082edb6d06ae&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;libchanã«ãŠã‘ã‚‹channelã¨goã®channelã€åå‰ã¯åŒã˜ã§ã‚‚åˆ¥ãƒ¢ãƒã§ã™ã€‚
ä»Šã®ã¨ã“ã‚ã“ã‚Œã¨ã„ã£ãŸç”¨é€”ãŒæ€ã„ã¤ã‹ãªã„ã§ã™ãŒã€libswarmã‹ã‚‰æ´¾ç”Ÿã—ãŸã‚‚ã®ã¨ã™ã‚‹ã¨å¤šæ§˜ãªãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®å·®ç•°ã‚’å¸åã™ã‚‹ãŸã‚ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å®Ÿè£…ã‚’æ‰‹åŠ©ã‘ã—ã¦ãã‚Œã‚‹ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨è€ƒãˆã‚‹ã®ãŒã‚ˆã•ãã†ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¨ã„ã†ã‹ã€DockerConã§ã¡ã‚‡ãã¡ã‚‡ãè¨€åŠã•ã‚Œã¦ã„ãŸã€Œãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã€ã¨ã„ã†æ¦‚å¿µã®ã»ã†ãŒèˆˆå‘³ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;è¿½è¨˜:420542fbd67b0f03cfaa082edb6d06ae&#34;&gt;è¿½è¨˜&lt;/h2&gt;

&lt;p&gt;&lt;blockquote class=&#34;twitter-tweet&#34; lang=&#34;ja&#34;&gt;&lt;p&gt;ãã†ã„ãˆã°æ›¸ãå¿˜ã‚Œã¦ãŸã‘ã©ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæˆé•·ã™ã‚‹éç¨‹ã«ãŠã„ã¦libchanã®çµ±ä¸€çš„ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã‚ˆã£ã¦æ¯”è¼ƒçš„å®¹æ˜“ã«ã‚¹ã‚±ãƒ¼ãƒ«ã§ãã‚‹ã‚“ã ã‚ˆã€ã£ã¦ã“ã¨ã‚’DockerConã®ã‚­ãƒ¼ãƒãƒ¼ãƒˆã§ã„ã£ã¦ãŸã‚ˆã†ãªã€‚ã€‚ã€‚ã‚ã¨ã§ã¿ã‹ãˆãã†ã€‚&lt;/p&gt;&amp;mdash; Masaki YOSHIDA (@ReSTARTR) &lt;a href=&#34;https://twitter.com/ReSTARTR/statuses/482775493511376896&#34;&gt;2014, 6æœˆ 28&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;//platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;ã¨ã„ã†ã“ã¨ã«æ°—ã¥ãã€å†åº¦ã‚­ãƒ¼ãƒãƒ¼ãƒˆã‚’è¦‹è¿”ã—ã¦ã¾ã—ãŸã€‚libchanã«ã¤ã„ã¦ã¯ä»¥ä¸‹å‹•ç”»ã®30:45ã‚ãŸã‚Šã‹ã‚‰ã©ã†ãã€‚&lt;/p&gt;

&lt;iframe width=&#34;640&#34; height=&#34;360&#34; src=&#34;//www.youtube.com/embed/_DOXBVrlW78&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
</description>
    </item>
    
    <item>
      <title>Goã§memcachedã®statsã‚’å–å¾—ã™ã‚‹</title>
      <link>http://blog.restartr.com/2014/04/21/golang-memcache-stats-client</link>
      <pubDate>Mon, 21 Apr 2014 00:17:33 +0900</pubDate>
      
      <guid>http://blog.restartr.com/2014/04/21/golang-memcache-stats-client</guid>
      <description>

&lt;p&gt;YouTubeã§ä½¿ã‚ã‚Œã¦ã„ã‚‹&lt;a href=&#34;https://github.com/youtube/vitess&#34;&gt;vitess&lt;/a&gt;ã®å®Ÿè£…ã‚’ã–ã£ã¨è¦‹ã¦ãŸã¨ã“ã‚ã€memcachedã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…ãŒç°¡æ½”ã§ã‚ã‹ã‚Šã‚„ã™ã‹ã£ãŸã®ã§å‡ºæ¥ã‚‹é™ã‚Šãƒ©ãƒ•ã«å®Ÿè£…ã‚’å†™çµŒã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‚„ã£ã¦ã‚‹ã“ã¨ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å—ã‘å–ã£ã¦ã€memcachedã®statsã‚’è¡¨ç¤ºã™ã‚‹ã ã‘ã§ã™ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ã“ã®å†™çµŒã§å­¦ã¹ã‚‹ã“ã¨:73a14f702b9f2e9f68d8015c0962278f&#34;&gt;ã“ã®å†™çµŒã§å­¦ã¹ã‚‹ã“ã¨&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;flagãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ãŸã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®å–å¾—&lt;/li&gt;
&lt;li&gt;netãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ãŸãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶š&lt;/li&gt;
&lt;li&gt;bufioãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ãŸã‚¹ãƒˆãƒªãƒ¼ãƒ ã®èª­ã¿å‡ºã—&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;main:73a14f702b9f2e9f68d8015c0962278f&#34;&gt;main()&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func main() {
	// å¼•æ•°èª­ã¿å‡ºã—
	address := flag.String(&amp;quot;address&amp;quot;, &amp;quot;localhost:11211&amp;quot;, &amp;quot;server address&amp;quot;)
	flag.Parse()
	fmt.Printf(&amp;quot;server: %s\n&amp;quot;, *address)

	// ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶š
	conn, err := GetConn(*address)
	if err != nil {
		fmt.Printf(&amp;quot;%#v&amp;quot;, err)
		os.Exit(1)
	}
	defer conn.conn.Close()

	// statsèª­ã¿å‡ºã—
	result, _ := conn.Stats()
	fmt.Printf(&amp;quot;%s&amp;quot;, result)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;å®Ÿè¡Œçµæœ:73a14f702b9f2e9f68d8015c0962278f&#34;&gt;å®Ÿè¡Œçµæœ&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ go run ./memcache_stats.go --address=localhost:11211
server: localhost:11211
STAT pid 23282
STAT uptime 12425
STAT time 1398007875
STAT version 1.4.4
STAT pointer_size 64
STAT rusage_user 0.335948
STAT rusage_system 0.344947
  :
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;å®Ÿè£…å…¨ä½“:73a14f702b9f2e9f68d8015c0962278f&#34;&gt;å®Ÿè£…å…¨ä½“&lt;/h3&gt;

&lt;p&gt;{% gist 11116595 memcache_stats.go %}&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>vimã§ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã ã‘ã‚¿ãƒ–ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã«ã™ã‚‹æ–¹æ³•</title>
      <link>http://blog.restartr.com/2014/04/20/vimrc-noexpandtab-in-golang</link>
      <pubDate>Sun, 20 Apr 2014 16:15:21 +0900</pubDate>
      
      <guid>http://blog.restartr.com/2014/04/20/vimrc-noexpandtab-in-golang</guid>
      <description>&lt;p&gt;rubyã‚„pythonãªã©é€šå¸¸ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãå ´åˆã¯ã€åŸºæœ¬çš„ã«ã‚½ãƒ•ãƒˆã‚¿ãƒ–(2spaces)ã§ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã•ã‚Œã‚‹ã‚ˆã†ã«vimã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-vim&#34;&gt;set noexpandtab
set tabstop=2
set shiftwidth=2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‘ã‚Œã©ã€Goã®å ´åˆã¯ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯ãƒãƒ¼ãƒ‰ã‚¿ãƒ–ãŒé€šä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;ãªã®ã§æ‹¡å¼µå­ãŒ&amp;rdquo;.go&amp;rdquo;ã®å ´åˆã ã‘ãƒãƒ¼ãƒ‰ã‚¿ãƒ–ã§ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã™ã‚‹ãŸã‚ã®è¨­å®šã‚’.vimrcã«æ›¸ã„ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-vim&#34;&gt;if expand(&amp;quot;%:t&amp;quot;) =~ &amp;quot;.*\.go&amp;quot;
  set noexpandtab
  set tabstop=4
  set shiftwidth=4
endif
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;%:t&lt;/code&gt;ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå«ã¾ãªã„ãƒ•ã‚¡ã‚¤ãƒ«åã€‚&lt;/p&gt;

&lt;p&gt;autocmdä½¿ã†ã»ã†ãŒè‰¯ã„ã‹ã‚‚ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-vim&#34;&gt;au BufNewFile,BufRead *.go set noexpandtab tabstop=4 shiftwidth=4
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¡ãªã¿ã«ã€&lt;code&gt;set expandtab&lt;/code&gt;ã—ã¦ã‚‹çŠ¶æ…‹ã§ã‚¿ãƒ–ã‚’å…¥åŠ›ã™ã‚‹å ´åˆã¯&lt;code&gt;Ctrl-v + &amp;lt;tab&amp;gt;&lt;/code&gt;ã§ãƒãƒ¼ãƒ‰ã‚¿ãƒ–ãŒå…¥åŠ›ã§ãã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Goã¨Pythonã‚’ZeroMQã§ç¹‹ã</title>
      <link>http://blog.restartr.com/2013/04/26/connect-go-and-python-with-zeromq</link>
      <pubDate>Fri, 26 Apr 2013 23:34:48 +0900</pubDate>
      
      <guid>http://blog.restartr.com/2013/04/26/connect-go-and-python-with-zeromq</guid>
      <description>&lt;p&gt;æœ€è¿‘Rubyã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚ªã‚¤ãƒ©ãƒ¼ã‚’è§£ããªãŒã‚‰Rubyã«æ…£ã‚Œã‚ˆã†ã¨ã—ã¦ã‚‹ã®ã§ã™ãŒã€ã¡ã‚‡ã£ã¨é£½ãã¦ããŸã®ã§æ¯æŠœãã«Goã‚’æ›¸ã„ãŸã‚Šã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¤ã„ã§ã«ZeroMQã‚‚è©¦ã—ã¦ã¿ãŸã‹ã£ãŸã®ã§ã€Goã¨Pythonã‚’ZeroMQã§ç¹‹ã„ã§ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;æ§‹æˆã¯ã“ã‚“ãªæ„Ÿã˜ã§ã€Python(ã‹Go)clientã‚’èµ·å‹•ã—ã€Goã§å‹•ãmonitorqçµŒç”±ã§Goã®serverã«ã¤ãªãŒã‚Šã¾ã™ã€‚PUB/SUBã§monitorã‹ã‚‰ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã§ãã‚‹ã®ãŒãƒŸã‚½ã§ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;                  +----------------------------------------+
                  |                                        |
  +------+        |--------------------------+     +-----+ |
  |client|--------|9001     monitorq     9002|-----|serv | |
  |(REQ) |        |(ROUTER)   9003   (DEALER)|     |(REP)| |
  +------+        |--------------------------+     +-----+ |
                  |          |(PUB)                        |
                  |          |                             |
                  |          |                             |
                  |          |(SUB)                        |
                  |      +-------+                         |
                  |      |monitor|                         |
                  |      +-------+                         |
                  +----------------------------------------+
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;â€»client/server/monitorã¯è¤‡æ•°ãŸã¡ã‚ã’ã‚‹ã¨ã‚ˆã—ãªã«æŒ¯ã‚Šåˆ†ã‘ã¦ãã‚Œã¾ã™ã€‚&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;monitorqã§fan-in/outã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ go run queue.go monitorq
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;clientã‹ã‚‰&amp;rdquo;PING&amp;rdquo;ã‚’æŠ•ã’ã‚‹(ã¨ã€&amp;rdquo;PONG#&lt;pid&gt;&amp;ldquo;ãŒå¸°ã‚‹)&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ python run queue.py client
PONG#&amp;lt;28870&amp;gt;
PONG#&amp;lt;28870&amp;gt;
 :
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;serverã‹ã‚‰&amp;rdquo;PONG&amp;rdquo;ã‚’è¿”ã™(clientã‹ã‚‰ã®PINGã‚’è¡¨ç¤º)&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ go run queue.go serv
Recv: PING#&amp;lt;73835&amp;gt;
Recv: PING#&amp;lt;73835&amp;gt;
 :
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;monitorã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆç·æ•°ã‚’ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ go run queue.go monitor
MONITOR: IN: 2082, OUT 2082
MONITOR: IN: 2083, OUT 2083
 :
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚³ãƒ¼ãƒ‰ã¯gistã«ã‚ã’ã¦ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gist.github.com/ReSTARTR/5467656&#34;&gt;gist&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ZeroMQãªã‚‰ä»–ã«ã‚‚ã„ã‚ã‚“ãªæ§‹æˆãŒã¨ã‚Œã‚‹ã®ã§ã€ä½¿ã„ã©ã“ã‚ã¯çµæ§‹ã‚ã‚‹ã®ã§ã¯ãªã„ã‹ã¨ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã€ä¸æ…£ã‚ŒãªGoã§æ›¸ã„ã¦ã¿ã¾ã—ãŸãŒã€ã“ã‚Œãã‚‰ã„ã§ã‚ã‚Œã°ã‚‚ã‚ã‚Šã¨ç´ ç›´ã«ã‹ã‘ã‚‹ãªãã¨ã„ã†å°è±¡ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;Goã§æ›¸ã‹ã‚ŒãŸZeroMQã®ã‚µãƒ³ãƒ—ãƒ«ã¯ä»¥ä¸‹githubãƒªãƒã‚¸ãƒˆãƒªã«ãŸãã•ã‚“ã‚ã‚‹ã®ã§ã€è¦—ã„ã¦ã¿ã‚‹ã¨è‰²ã€…å‹‰å¼·ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/imatix/zguide/tree/master/examples/Go&#34;&gt;zguide/examples/Go at master ? imatix/zguide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>