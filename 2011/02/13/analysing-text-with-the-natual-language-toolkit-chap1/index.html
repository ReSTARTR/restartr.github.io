    <!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="ReSTARTR">
		<meta name="description" content="">
		<meta name="generator" content="Hugo 0.15" />
		<title>入門 自然言語処理 第一章 &middot; I Will Survive</title>
		<link rel="shortcut icon" href="http://blog.restartr.com/images/favicon.ico">
		<link rel="stylesheet" href="http://blog.restartr.com/css/style.css">
		<link rel="stylesheet" href="http://blog.restartr.com/css/highlight.css">
		<link rel="stylesheet" href="http://blog.restartr.com/css/monosocialiconsfont.css">
		<link rel="stylesheet" href="http://blog.restartr.com/css/restartr.css">
		
		<link href="http://blog.restartr.com/index.xml" rel="alternate" type="application/rss+xml" title="I Will Survive" />
    


 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-894530-10']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <meta name="google-site-verification" content="NrAeSKEW2-UUxTVliLJ7-38Af1sR4lDMPeEnZwjVc6o" />


	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='http://blog.restartr.com/'> <span class="arrow">←</span>Home</a>
	

	
		<a href='http://blog.restartr.com/about'>About</a>
	

	
	<a class="cta" href="http://blog.restartr.com/index.xml">Subscribe</a>
	
</nav>

        <section id="wrapper">
            <article class="post">
                <header>
                    <h1>入門 自然言語処理 第一章</h1>
                    <h2 class="headline">February 13, 2011 -
                    
                    入門 自然言語処理
                    </h2>
                </header>
                <section id="post-body">
                    

<p><a href="http://www.amazon.co.jp/dp/4873114705/">入門 自然言語処理</a>は11月に購入してから寝かせたままでしたが、本日より読み始めることにしました。</p>

<p>本日は第一章です。内容は大きく以下2点。</p>

<p><ul>
<li>pythonとnltkでの簡単なテキスト処理方法</li>
<li>自然言語処理を俯瞰する</li>
</ul>
内容は本に任せるとして、ここでは演習問題の解答をしようと思います。</p>

<p><a id="more"></a><a id="more-588"></a></p>

<p>問題文は簡潔に記述するため、本書に記載されているものとは異なる表記をしています。</p>

<p><h3>納得いかない問題</h3>
ひとつだけ納得いかない問題がありました。
「<i>17. text9からtext.9.index()を使って’sunset’を含む一文を抜き出す</i>」です。</p>

<p>解答をググっても、こちらしか出てこず。
<a href="http://sojin.kyoto-math.jp/nlp/1-3.html#id1">1-15. bで始まる単語抽出 &mdash; 入門自然言語処理</a></p>

<p>たしかに、</p>

<p><pre class="brush:python">
&gt;&gt;&gt; text9.index(&lsquo;sunset&rsquo;)
629
</pre>
と帰ってきます。でも、実際には&rsquo;sunset&rsquo;を含む一文は複数あるわけです。
確認するとこんな感じ。</p>

<p><pre class="brush:python">
&gt;&gt;&gt; [t for t in text9 if t==&lsquo;sunset&rsquo;]
[&lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;, &lsquo;sunset&rsquo;]
</pre>
複数ある一文を抽出しなくていいの？という疑問が出てきました。すべての文を抽出する方法はさておき、今回はひとつだけ抽出する解答だけを書きました。</p>

<p><h3>演習問題</h3>
<h4>準備</h4>
nltkとmatplotlibがインポートできていれば、以下コードだけですみます。</p>

<p><pre class="brush:python">from nltk.book import *</pre>
以下が、すべての問題の解答です。
(私個人の解答であり、正解の保証はどこにもありません。）</p>

<p><h4>1. Pythonインタプリタを電卓として、12 / (4 + 1)のような計算を入力してみよう</h4>
<pre class="brush:python">&gt;&gt;&gt; 12 / 4 + 1
2.3999999999999999</pre>
<h4>2. 26文字のアルファベットが与えられたとき、10字の文字列は26の10乗（あるいは26**10）種類も作ることができるが、100文字だったら何種類か。</h4>
<pre class="brush:python">&gt;&gt;&gt; 26 ** 100
3142930641582938830174357788501626427282669988762475256374173175398995908420104023465432599069702289330964075081611719197835869803511992549376L</pre>
<h4>3. [&lsquo;Monty&rsquo;, &lsquo;Python&rsquo;] * 20や 3 * sent1を実行すると何が起こるか</h4>
<pre class="brush:python">&gt;&gt;&gt; [&lsquo;Monty&rsquo;, &lsquo;Python&rsquo;] * 3
[&lsquo;Monty&rsquo;, &lsquo;Python&rsquo;, &lsquo;Monty&rsquo;, &lsquo;Python&rsquo;, &lsquo;Monty&rsquo;, &lsquo;Python&rsquo;]</pre>
<h4>4. text2には単語がいくつ含まれているか。また重複を除くといくつか。</h4>
<pre class="brush:python">&gt;&gt;&gt; #単語数
&gt;&gt;&gt; len(text2)
141576
&gt;&gt;&gt; #重複除いた単語数
&gt;&gt;&gt; len(set(text2))
6833</pre>
<h4>5. ユーモア小説とロマンス小説の間で、どちらが語彙の多様性が高いか。</h4>
<ul>
<li>ユーモア小説：多様性＝6.9</li>
<li>ロマンス小説：多様性＝8.3</li>
</ul>
?ロマンス小説が高い。</p>

<p><h4>6. Sense and Sensibilityのなかで、エリナ、マリアン、エドワード、ウィロビーの分散プロットを表示してみよう。</h4>
名前まで日本語表記されていて元の綴りがわからない…
なのでまず探すところから。</p>

<p><pre class="brush:python">&gt;&gt;&gt;[t for t in set(text2) if t.startswith(&lsquo;El&rsquo;)]
[&lsquo;Elinor&rsquo;, &lsquo;Eliza&rsquo;]</pre>
な感じで4人分探します。
で、プロットする</p>

<p><pre class="brush:python">&gt;&gt;&gt; text2.dispersion_plot([&lsquo;Elinor&rsquo;, &lsquo;Mrianne&rsquo;, &lsquo;Edward&rsquo;, &lsquo;Willoughbys&rsquo;])</p>

<h1 id="ここでプロットウインドウが表示される:4148d9cc55906c2cc8991c3bd49169cb">※ここでプロットウインドウが表示される</h1>

<p></pre>
<h5>男女の役割の違い</h5>
女性が高頻度に出現</p>

<p><h5>カップルの特定は可能か</h5>
できない。どうしろと…</p>

<p><h4>7. text5のコロケーションを探してみよう。</h4>
<pre class="brush:python">&gt;&gt;&gt; text5.collocations()
Building collocations list
wanna chat; PART JOIN; MODE #14-19teens; JOIN PART; PART PART;
cute.-ass MP3; MP3 player; JOIN JOIN; times .. .; ACTION watches; guys
wanna; song lasts; last night; ACTION sits; -&hellip;)&hellip;- S.M.R.; Lime
Player; Player 12%; dont know; lez gurls; long time</pre>
<h4>8. len(set(text4))の目的</h4>
単語のユニーク数を求める</p>

<p><h4>9. リストと文字列</h4>
<h5>(a) 変数の定義と2種類の出力を試してみよう</h5>
<pre class="brush:python">&gt;&gt;&gt; my_string = &lsquo;My String&rsquo;
&gt;&gt;&gt; my_string
My String
&gt;&gt;&gt; print my_string
My String
</pre>
<h5>(b). 連結と演算</h5>
<pre class="brush:python">&gt;&gt;&gt; my_string + my_string
&lsquo;My StringMyString&rsquo;
&gt;&gt;&gt; my_string * 3
&lsquo;My StringMy StringMy String&rsquo;
</pre>
<h4>10. 単語のリストを保持するmy_sentという変数を定義しよう</h4>
<h5>(a) &lsquo; &lsquo;.joiin(my_sent)を使ってリストを文字列に変換してみよう。</h5>
<pre class="brush:python">&gt;&gt;&gt; &lsquo; &lsquo;.join(my_string.split(&rsquo; &lsquo;))
&lsquo;My String&rsquo;
</pre>
<h5>(b) split()を使ってできた</h5>
<pre class="brush:python">&gt;&gt;&gt; my_sent = [&lsquo;My&rsquo;, &lsquo;Sent&rsquo;]
&gt;&gt;&gt; &lsquo; &lsquo;.join(my_sent)
&lsquo;My Sent&rsquo;
&gt;&gt;&gt; &lsquo; &lsquo;.join(&lsquo;hoge moge&rsquo;.split(&rsquo; &lsquo;))
&lsquo;My Sent&rsquo;
</pre>
<h4>11. リストの連結</h4>
<pre class="brush:python">&gt;&gt;&gt; phrase1 = [&lsquo;hoge&rsquo;]
&gt;&gt;&gt; phrase1 += [&lsquo;moge&rsquo;]
&gt;&gt;&gt; phrase2 = [&lsquo;foo&rsquo;]
&gt;&gt;&gt; phrase2 += [&lsquo;bar&rsquo;]
&gt;&gt;&gt; phrase1 + phrase2
[&lsquo;hoge&rsquo;, &lsquo;moge&rsquo;, &lsquo;foo&rsquo;, &lsquo;bar&rsquo;]</pre>
<h5>len(phrase1 + phrase2)とlen(phrase1) + len(phrase2)の違いはなにか。</h5>
連結した後の長さと、それぞれの長さの加算</p>

<p><h4>12. NLPと関連あるものはどれか。</h4>
<ul>
<li>[&lsquo;Monty Python&rsquo;][6:12]</li>
<li>[&lsquo;Monty&rsquo;, &lsquo;Python&rsquo;][1]</li>
</ul>
?b</p>

<p><h4>13. sent1[2][2]はなにを表しているだろうか。</h4>
2要素目の2文字目</p>

<p><h4>14.  要素のインデックス取得</h4>
微妙だけど。</p>

<p><pre class="brush:python">&gt;&gt;&gt; i = 0
&gt;&gt;&gt; for t in sent3:
&hellip;   if t==&lsquo;the&rsquo;:
&hellip;     print i
&hellip;   i += 1
&hellip;
1
5
8</pre>
<h4>15. bから始まる単語の取得</h4>
<pre class="brush:python">&gt;&gt;&gt; sorted(set([t for t in text5 if t.startswith(&lsquo;b&rsquo;)]))
[&lsquo;b&rsquo;, &lsquo;b-day&rsquo;, &lsquo;b/c&rsquo;, &lsquo;b4&rsquo;,&hellip;&hellip;</pre>
<h4>16. range()について</h4>
<pre class="brush:python">&gt;&gt;&gt; range(10)
[1,2,3&hellip;.9]
&gt;&gt;&gt; range(10,20)
[10,11,12,&hellip;., 20]
&gt;&gt;&gt; range(10,20,2)
[10, 12, &hellip;, 18]
&gt;&gt;&gt; range(20,10,-2)
[20, 18, &hellip;, 12]</pre>
<h4>17. text9からtext.9.index()を使って&rsquo;sunset&rsquo;を含む一文を抜き出す</h4>
これで良いのかわかりませんが、ひとまずの解答として。</p>

<p><pre class="brush:python">
dot_pre = 0 # 直前の&rsquo;.&lsquo;の位置
dot_aft = 0 # 直後の&rsquo;.&lsquo;の位置
found = False # &lsquo;.&lsquo;が見つかったかどうか
i = 0 # 現在位置
for t in text9:
  if t==&lsquo;sunset&rsquo;:
    found = True
  if t==&lsquo;.&rsquo;:
    if found==True:
      dot_aft = i
      break
    else:
      dot_pre = i
  i += 1</p>

<h1 id="sunset-を含む一文を生成する:4148d9cc55906c2cc8991c3bd49169cb">&lsquo;sunset&rsquo;を含む一文を生成する。</h1>

<p>&rsquo; &lsquo;.join([text9[t] for t in range(dot_pre+1, dot_aft+1)])</p>

<h1 id="chapter-i-the-two-poets-of-saffron-park-the-suburb-of-saffron-park-lay-on-the-sunset-side-of-london-as-red-and-ragged-as-a-cloud-of-sunset:4148d9cc55906c2cc8991c3bd49169cb">&lsquo;CHAPTER I THE TWO POETS OF SAFFRON PARK THE suburb of Saffron Park lay on the sunset side of London , as red and ragged as a cloud of sunset .&rsquo;</h1>

<p></pre>
<h4>18. sent1からsent8までに含まれる語彙を計算</h4>
<pre class="brush:python">len(set(sent1 + sent2 + sent3 + sent4 + sent5 + sent6 + sent7 + sent8))</pre>
<h4>19. 以下2行の違いは何か。</h4>
<pre class="brush:python">sorted(set([w.lower() for w in text1]))
sorted([w.lower() for w in set(text1)])</pre>
<h5>sorted(set([w.lower() for w in text1]))</h5>
小文字のリストを作ってからユニークにしてソート</p>

<p><h5>sorted([w.lower() for w in set(text1)])</h5>
ユニークリストから小文字にしてソート
こちらが大きい。重複をふくんでいるので。</p>

<p><h4>20. w.isupper()とw.islower()の違いは何か</h4>
大文字ならTrueと小文字ならTrue</p>

<p><h4>21. 最後の2単語を取り出すスライス式を書いてみよう。</h4>
<pre class="brush:python">&gt;&gt;&gt; text2[-2:]
</pre>
<h4>21. 4文字の単語のうち、頻度の高い順に取得してみよう。</h4>
<pre class="brush:python">
&gt;&gt;&gt; FreqDist([t for t in text4 if len(t)==4]).keys()
</pre>
<h4>21. 大文字の単語を一行ずつ表示</h4>
<pre class="brush:python">
&gt;&gt;&gt;  for str in [t for t in text6 if t.isupper()]:
&gt;&gt;&gt;   print str
</pre>
<h4>24. 条件にあったものを含むリスト</h4>
<h5>a: izeで終わる</h5>
<pre class="brush:python">[t for t in text6 if t.endswith(&lsquo;ize&rsquo;)]</pre>
<h5>b: zを含む</h5>
<pre class="brush:python">[t for t in text6 if &lsquo;z&rsquo; in t]</pre>
<h5>c: ptを含む</h5>
<pre class="brush:python">[t for t in text6 if &lsquo;pt&rsquo; in t]</pre>
<h5>d: 先頭大文字あと小文字（＝タイトルケース)</h5>
<pre class="brush:python">[t for t in text6 if t.isalpha()==True and t==t.title()]</pre>
<h4>25. listed = [&lsquo;she&rsquo;, &lsquo;sells&rsquo;, &lsquo;sea&rsquo;, &lsquo;shells&rsquo;, &lsquo;by&rsquo;, &lsquo;the&rsquo;, &lsquo;sea&rsquo;, &lsquo;shore&rsquo;]</h4>
<h4></h4>
<h5>shではじまる単語</h5>
<pre class="brush:python">[t for t in listed if t.startswith(&lsquo;sh&rsquo;)]</pre>
<h5>4文字より大きい単語</h5>
<pre class="brush:python">[t for t in listed if len(t)&gt;=4]</pre>
<h4>26. sum([len(w) for w in text1])について</h4>
<h5>どんな処理？</h5>
リスト中のすべての単語長の合計</p>

<p><h5>これをつかって平均はだせる？</h5>
<pre class="brush:python">
&gt;&gt;&gt; sum([len(w) for w in text1])/len(text1)
3.8304111280236488</pre>
<h4>27. 語彙サイズを返すvocab_size(text)を定義</h4>
<pre class="brush:python">
&gt;&gt;&gt; def vocab_size(text):
&hellip;  return len(set(text))
&hellip;
&gt;&gt;&gt; vocab(text1)
19317
</pre>
<h4>28. percent(word, text)を定義</h4>
<pre class="brush:python">
&gt;&gt;&gt; def percent(word, text):
&hellip;  return len([t for t in text if t==word]) / len(text)
</pre>
<h4>29. set(sent3) &lt; set(text1)について</h4>
<h5>実行してみる</h5>
<pre class="brush:python">True</pre>
<h5>29. 異なるテキストで実行して何が起こるか</h5>
<pre class="brush:python">&gt;&gt;&gt; set(sent3) &lt; set(text3)
True</pre>
<h5>実用的な応用は何があるか</h5>
ドキュメント間の語彙数の比較</p>

<ul>
<li><a href="http://www.amazon.co.jp/dp/4873114705">入門 自然言語処理 [大型本]</a></li>
</ul>

                </section>
            </article>
            <footer id="post-meta" class="clearfix">
            <p class="small">
            
            #python #nlp
            
            </p>
                <a href="https://twitter.com/ReSTARTR">
                        <img class="avatar" src="http://blog.restartr.com/images/avatar.png">
                        <div>
                            <span class="dark">ReSTARTR</span>
                            <span></span>
                        </div>
                    </a>
                <section id="sharing">
                    <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://blog.restartr.com/2011/02/13/analysing-text-with-the-natual-language-toolkit-chap1" data-via="ReSTARTR" data-counturl="http://blog.restartr.com/2011/02/13/analysing-text-with-the-natual-language-toolkit-chap1" >Tweet</a></li>
<script type="text/javascript">
  (function(){
    var twitterWidgets = document.createElement('script');
    twitterWidgets.type = 'text/javascript';
    twitterWidgets.async = true;
    twitterWidgets.src = '//platform.twitter.com/widgets.js';
    document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
  })();
</script>

<a href="http://blog.restartr.com/2011/02/13/analysing-text-with-the-natual-language-toolkit-chap1" class="hatena-bookmark-button" data-hatena-bookmark-layout="standard" title="このエントリーをはてな>ブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></li>

                </section>
            </footer>

            

            <ul id="post-list" class="archive readmore">
    <h3>Read more</h3>
    
    
        
        <li>
            <a href="http://blog.restartr.com/2017/05/08/restful-web-clients">&#34;RESTful Web Clients&#34;を読んだ<aside class="dates">May 8</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://blog.restartr.com/2017/05/07/frontend-engineer">フロントエンドエンジニアになった<aside class="dates">May 7</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://blog.restartr.com/2017/04/02/retrospective--a-newbie-freelancer">フリーランス1社目の契約を満了した<aside class="dates">Apr 2</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://blog.restartr.com/2016/12/31/things-of-2016">2016年ふりかえり<aside class="dates">Dec 31</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://blog.restartr.com/2016/09/05/go-netutil">Re: Goの通信経路選択(net.LookupIP &amp; net.Dial)<aside class="dates">Sep 5</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://blog.restartr.com/2016/08/29/golang-networking">Goの通信経路選択(net.LookupIP &amp; net.Dial)<aside class="dates">Aug 29</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://blog.restartr.com/2016/07/04/became-a-freelance-engineer">フリーランスエンジニアになりました<aside class="dates">Jul 4</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://blog.restartr.com/2016/03/31/got-my-ergodox-ez">ErgoDox EZが届いた<aside class="dates">Mar 31</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://blog.restartr.com/2016/03/13/from-octopress-to-hugo">OctopressからHugoに移行<aside class="dates">Mar 13</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://blog.restartr.com/2016/02/27/ec2-ls-hosts">ec2-ls-hosts: EC2インスタンスを一覧するだけのシンプルツール<aside class="dates">Feb 27</aside></a>
        </li>
        
   
</ul>
            <footer id="footer">
    
        
<div id="social">
    
    <a class="symbol" href="https://github.com/ReSTARTR">
        github
    </a>
    
    <a class="symbol" href="https://twitter.com/ReSTARTR">
        twitterbird
    </a>
    
</div>

    
    <p class="small">
    
        © Copyright 2017 ReSTARTR
    
    </p>
</footer>

        </section>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://blog.restartr.com/js/main.js"></script>
<script src="http://blog.restartr.com/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


    </body>
</html>
